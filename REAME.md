# 五代倉頡輸入法簡碼專案

## 設計目標

簡快碼，顧名思義，是為了增加輸入速度所設定的特別編碼。大部分比倉頡輸入法晚出現的字型類輸入法，譬如五筆、行列、嘸蝦米等，都有為常用字編製簡快碼。相比起這些後起之秀，倉頡輸入法的設計宗旨更強調「一字一碼」，故此倉頡輸入法並無內置簡碼。雖然倉頡的輸入速度遠比上述的其餘輸入法低，但是在生活中常見的情形下，這樣的輸入速度已經很足夠。儘管如此，為倉頡輸入法編製簡碼依然是一個吸引筆者的實驗項目。筆者並非首個想到為倉頡編纂簡碼的人，[全方位倉頡輸入法](https://zh.wikipedia.org/wiki/%E5%85%A8%E6%96%B9%E4%BD%8D%E5%80%89%E9%A0%A1%E8%BC%B8%E5%85%A5%E6%B3%95)（下稱全倉）、[快速倉頡輸入法](https://www.scj2000.net/)（下稱快倉）、[大新倉頡輸入法](http://www.eztyping.com.tw/)等方案皆有為倉頡編訂簡碼。然而在筆者看來上述方案均有不足之處：據我所知，大新倉頡對倉頡編碼作出了頗大規模的調整，筆者認為這已然創製了一個全新的類倉頡輸入法；快倉的設計雖然沒有大幅度地改變倉頡輸入法原來的編碼，但該專案為倉頡增添了數個輔助字根，而且以提升輸入速度的名義加入了大量重碼；全倉是筆者認為最理想的「極簡主義」方案，對倉頡編碼不但「有增不減」，而且作出的改動幅度很小。可是全倉不是開源軟件，在使用、發佈上存有版權疑慮，而且開發者停止更新已有十數年之久。筆者實行本專案的目的是以全倉為模型編訂一套開放版權的倉頡簡碼編碼方案。

在某些輸入法當中，例如[行列輸入法](https://www.array30.com/)，簡碼以及特別碼是分開處理的。據筆者理解，行列中的「簡碼」是對一個字的正常編碼的縮減，有一級、二級之分，多需要以數字鍵選字；而「特別碼」則全為兩鍵編碼，跟原來的編碼不一定有關聯。筆者在此專案中為避免使用數字鍵選字而把所有「簡碼」設置成沒有重碼的兩碼輸入字串，但是每一個字的「簡碼」跟第五代倉頡的標準編碼不一定有關聯。以下將上述編碼統稱「簡碼」。

本專案有兩個互相衝突的目標。專案最主要的目標是為倉頡輸入法增加輸入速度，所以編碼的設定以出現頻率最高的字為優先進行編碼，直至用盡可能的兩碼組合。理論上，如果我們以字頻與碼長的商為權重並按此權重順序為碼長三碼或以上的字編上一碼或兩碼組合的編碼，輸入速度就可以得到最大的提升。可是，這樣的選擇必然導致簡碼表存在大量無理碼，大幅降低簡碼表的可記憶性以及可行性。畢竟，編製出不能用的無理編碼跟沒有編簡碼的結果一樣，而實行這樣的方案也不過是浪費時間。反之，如果我們嚴格以可記憶性為目標進行編碼，所有兩碼編碼盡皆是「首、尾碼」、「首、次碼」、「字首、字身之首碼」編碼，這樣的簡碼可以讓使用者很容易地背下來，但是方案對打字速度的提升便不盡如人意了。換言之，這個問題是魚與熊掌不可兼得的實例。筆者對此的解決方案是先以輸入速度為主進行最佳化，然後以此為基礎再對可記憶性相關參數在對預期速度影響不超過百分之一的前提下進行調整，以降低無理碼總數以及增加「首、尾碼」、「首、次碼」以及「字首、字身首碼」的編碼比例，盡量減低使用者對記憶簡碼編碼的負擔。

本專案暫無計劃對常用詞進行編碼。

## 數據來源及前置處理

五代倉頡原始編碼表來自 RIME 專案。來源網址如示：
https://github.com/rime/rime-cangjie
為方便匯入文檔，筆者對原文檔進行了微量編輯，移除了留言、註釋等字行，以及一些在工序指令運算時造成問題的特別字元編碼。

本方案以中華民國教育部所整理的字頻表為基礎為倉頡輸入法編寫簡碼表。字頻表來源如示：
https://language.moe.gov.tw/001/Upload/files/SITE_CONTENT/M0001/BIAU1.zip

字頻表來源文檔使用 Big5 編碼。在本儲存庫中的文檔被轉換成 Unicode 以便以 Python 進行運算處理。文檔中或有個別字元未能在電腦以文字處理器顯示者，筆者盡予刪減。

相比起其它字型類輸入法，倉頡輸入法的最大優點是低重碼率。筆者認為簡碼方案的實行應盡可能避免增加倉頡輸入法的重碼率，故此本簡碼編碼避開 Big5 以及 GB2312 常用及次常用字集所涵蓋的倉頡兩碼字，而只為上述字集沒有使用的兩碼組合進行編碼。筆者去除了在本儲存庫版本的 Big5 碼表中「兀」和「嗀」字的重複編碼，以便運算。

字首、字身的拆分資料來自 [hkcards倉頡字典](https://www.hkcards.com/)。本專案的字型拆分以第五代倉頡編碼為標準。本儲存庫有為分析字型拆分資料而編寫的 Python 工序指令以下載並處理該網站對字表內每個字「權威性」的第五代倉頡拆分方法。此工序指令把所輸出的數據儲存到磁碟，而進行編碼的工序指令隨後將之匯入並進行運算。hkcard 並未對 Big5 字表內的每一個字進行拆分，而且有一些頁面的 HTML 編碼有錯誤。因為字首、字身之拆分並非關鍵性的問題，Python 工序指令凡遇到此類錯誤都會略過而不作處理。

## 專案現狀

以現在的 Python 工序指令版本，運行後產生的碼表能把倉頡平均碼長由 `3.50` 鍵降至 `2.48` 鍵，預期能提升平均輸入速度 `29.03%`。未來將會對全倉的單字簡碼以同樣的方法使用中華民國教育部整理的字頻表進行預期速度分析，以作出具科學性的比較。

### 關於目前工序指令版本所產生的碼表的一些數據

首、尾碼：89字

重複任何一碼：5字

首、次碼：44字

字首、字身首碼：29字

首、三碼：1字

首碼 + 尾碼以外任何一碼：40字

次碼 + 任何一碼：30字

尾碼 + 任何一碼：75字

任何一碼 + 首碼：95字

首碼以外任何一碼 + 尾碼：53字

未劃分至上述類別、最少有一個關聯鍵的簡碼：16字

無理碼：16字